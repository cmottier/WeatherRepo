[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Prévisions météo à Montpellier",
    "section": "",
    "text": "Code\nimport datetime\nimport locale\nimport requests\nimport json\nimport numpy as np\nimport pandas as pd\nfrom IPython.display import display, Markdown\n\n# Récupération des données de météo pour les n prochains jours\n\ndef data(n):\n    debut = datetime.date.today()\n    fin = debut + datetime.timedelta(days = n-1)\n    debut = debut.isoformat()\n    fin = fin.isoformat()\n    url = \"https://api.open-meteo.com/v1/meteofrance?latitude=43.6109&longitude=3.8763&hourly=windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_sum,windspeed_10m_max&timezone=Europe%2FBerlin&start_date=\" + debut + \"&end_date=\" + fin\n    reponse = requests.get(url)\n    return reponse.json()\n\nn = 5\ndata = data(n)\n\nlocale.setlocale(locale.LC_TIME,'')\nDate = pd.to_datetime(data['daily']['time'])\nDate =[datetime.datetime.strftime(a,'%A %d/%m') for a in Date]\n\nweather = data['daily']['weathercode']\n\ntemp_min = data['daily']['temperature_2m_min']\ntemp_max = data['daily']['temperature_2m_max']\n\nprecip = data['daily']['precipitation_sum']\n\n# Calcul du vent moyen à 10m pour les n prochains jours\n\nwind = data['hourly']['windspeed_10m']\n\ndef wind_av(n):\n    wind_av = []\n    for i in range(n):\n        w = np.array(wind[24*i:24*(i+1)])\n        wind_av += [int(w[w!=None].mean())]\n    return wind_av\n\nwind = wind_av(n)\n\n# Correspondances codes météo - images\n\nwith open(\"Correspondances.json\", \"r\") as C:\n    image = json.load(C)\n\n#Construction tableau\n\nD = \"|\".join(Date)\nP = \" mm|\".join([str(precip[i]).replace(\"None\",\"-\") for i in range(n)]) \nWi = \" km/h|\".join(str(i) for i in wind) + \" km/h\"\n\nW = \"\"\nfor i in weather :\n    W += \"![](\" + image[str(i)]['image'] + \")|\"\n\nSep = \"|\"\nT = \"|\"\nfor i in range(n):\n    Sep += f\":---:|\"\n    T += f\"{temp_min[i]}°C - {temp_max[i]}°C|\"\n                                     \nT=(D+\"\\n\"+Sep+\"\\n\"+W+\"\\n\"+T+\"\\n\"+Wi+\"\\n\"+P)\n\ndisplay(Markdown(T))\n\n\n\n\n\n\n\n\n\n\n\n\nWednesday 25/10\nThursday 26/10\nFriday 27/10\nSaturday 28/10\nSunday 29/10\n\n\n\n\n\n\n\n\n\n\n\n12.0°C - 20.5°C\n14.6°C - 21.8°C\n13.2°C - 18.7°C\n8.6°C - 18.9°C\n13.2°C - 16.5°C\n\n\n8 km/h\n8 km/h\n17 km/h\n11 km/h\n12 km/h\n\n\n0.0 mm\n0.4 mm\n0.0 mm\n0.2 mm\n-\n\n\n\n\n\n\n\nCode\nprint(datetime.datetime.now())\n\n\n2023-10-25 12:50:00.857970"
  }
]